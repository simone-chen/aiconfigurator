# SPDX-FileCopyrightText: Copyright (c) 2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

# define your experiments here, the order will determine the execution order.
exps:
  - gb200_wide_ep_agg
  - gb200_wide_ep_disagg

gb200_wide_ep_agg:
  mode: "patch"
  serving_mode: "agg"
  model_name: "DEEPSEEK_V3"
  total_gpus: 512
  system_name: "gb200_sxm"
  enable_wide_ep: true # enable wide ep for prefill/decode
  isl: 4000 # input sequence length
  osl: 1000 # output sequence length
  ttft: 300.0  # Target TTFT in ms
  tpot: 40.0   # Target TPOT in ms
  config:
    nextn: 1 # mtp 1
    nextn_accept_rates: [0.85,0.3,0,0,0] # each position maps to the accept rate of the ith draft token, nextn 1 will only use the first draft token accept rate.
    
gb200_wide_ep_disagg:
  mode: "patch"
  serving_mode: "disagg"
  model_name: "DEEPSEEK_V3"
  total_gpus: 512
  system_name: "gb200_sxm"
  enable_wide_ep: true # enable wide ep for prefill/decode
  isl: 4000 # input sequence length
  osl: 1000 # output sequence length
  ttft: 300.0  # Target TTFT in ms
  tpot: 40.0   # Target TPOT in ms
  config:
    nextn: 1 # mtp 1
    nextn_accept_rates: [0.85,0.3,0,0,0] # each position maps to the accept rate of the ith draft token, nextn 1 will only use the first draft token accept rate.
    replica_config:
      max_gpu_per_replica: 512 # max gpus per replica, if specified as 0, it means no limit.